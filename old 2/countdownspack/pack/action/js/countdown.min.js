(function($){$.fn.artRowCountdown=function(options){var WIDTH=70,HEIGHT=110,$container=this,date=new Date(),settings=$.extend({date:'',separator:' ',stop:function(){}},options);if(settings.date.length>0){date.setTime(Date.parse(settings.date))}settings.date=date;function init(){var countdown=getCountdown(),showDays=Math.ceil(countdown.days)?true:false,html=['<div class="artrow-countdown">','<label class="time days" style="'+(showDays?'':'display:none;')+'">'+getInitNumber(countdown.days)+'</label>','<label class="separator" style="'+(showDays?'':'display:none;')+'">'+settings.separator+'</label>','<label class="time hours">'+getInitNumber(countdown.hours)+'</label>','<label class="separator">'+settings.separator+'</label>','<label class="time minutes">'+getInitNumber(countdown.minutes)+'</label>','<label class="separator">'+settings.separator+'</label>','<label class="time seconds">'+getInitNumber(countdown.seconds)+'</label>','<label class="separator">'+settings.separator+'</label>','<div class="clearfix"></div>','</div>'].join('');$container.html(html);if(countdown.time){updateTimer()}else{settings.stop($container)}}function getInitNumber(number){var result=[],style='',item;for(var i=0;i<number.length;i++){style='background-position: '+((number[i]|0)*WIDTH*-1)+'px 0;';item='<span class="number" style="'+style+'"><em class="value">'+number[i]+'</em></span>';result.push(item)}return result.join('')}function nextStep($element,number){$element.find('.number').each(function(i){var $item=$(this),value=$item.text(),left=number[i]*WIDTH*-1;if(value!=number[i]){$item.css('background-position',left+'px '+(HEIGHT*10*-1)+'px');setTimeout(function(){$item.css('background-position',left+'px '+(HEIGHT*9*-1)+'px')},100);setTimeout(function(){$item.css('background-position',left+'px '+(HEIGHT*8*-1)+'px')},200);setTimeout(function(){$item.css('background-position',left+'px  '+(HEIGHT*7*-1)+'px')},300);setTimeout(function(){$item.css('background-position',left+'px '+(HEIGHT*6*-1)+'px')},400);setTimeout(function(){$item.css('background-position',left+'px '+(HEIGHT*5*-1)+'px')},500);setTimeout(function(){$item.css('background-position',left+'px '+(HEIGHT*4*-1)+'px')},600);setTimeout(function(){$item.css('background-position',left+'px '+(HEIGHT*3*-1)+'px')},700);setTimeout(function(){$item.css('background-position',left+'px '+(HEIGHT*2*-1)+'px')},800);setTimeout(function(){$item.css('background-position',left+'px '+(HEIGHT*-1)+'px')},900);setTimeout(function(){$item.css('background-position',left+'px 0px')},1000)}$item.find('.value').text(number[i])})}function updateTimer(){var countdown=getCountdown(),$days=$container.find('.days'),$hours=$container.find('.hours'),$minutes=$container.find('.minutes'),$seconds=$container.find('.seconds');if($days.text()!=countdown.days){nextStep($days,countdown.days)}if($hours.text()!=countdown.hours){nextStep($hours,countdown.hours)}if($minutes.text()!=countdown.minutes){nextStep($minutes,countdown.minutes)}if($seconds.text()!=countdown.seconds){nextStep($seconds,countdown.seconds)}setTimeout(updateTimer,1000)}function getCountdown(){var now=Math.floor(new Date()/1000),end=Math.floor(settings.date/1000),time=end-now,days=time>0?(Math.floor((end-now)/60/ 60 /24)):0,hours=time>0?(Math.floor((end-now)/60/60)%24):0,minutes=time>0?(Math.floor((end-now)/60)%60):0,seconds=time>0?((end-now)%60):0;return{'time':time<0?0:time,'days':days.toString(),'hours':(hours<10?'0'+hours:hours).toString(),'minutes':(minutes<10?'0'+minutes:minutes).toString(),'seconds':(seconds<10?'0'+seconds:seconds).toString()}}init();return this}})(jQuery);